{"ast":null,"code":"import _classCallCheck from \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\test_express\\\\expresschuckjokes\\\\client\\\\src\\\\components\\\\jokes\\\\JokesBoard.js\";\nimport React, { Component } from 'react';\nimport JokeList from './JokesList';\nimport { connect } from 'react-redux';\nimport { addJoke as _addJoke } from '../../store/actions/jokesActions';\nimport { saveScrollPos as _saveScrollPos } from '../../store/actions/scrollActions';\nimport { getCategories as _getCategories } from '../../store/actions/categoriesActions';\nimport viewportImage from '../../images/chuckArms.png';\nimport balloonImage from '../../images/balloon.png';\nimport '../../styles/style.css';\n\nvar JokesBoard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(JokesBoard, _Component);\n\n  function JokesBoard(props) {\n    var _this;\n\n    _classCallCheck(this, JokesBoard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JokesBoard).call(this, props));\n\n    _this.showDropdownMenu = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        displayMenu: true\n      }, function () {\n        document.addEventListener('click', _this.hideDropdownMenu);\n      });\n    };\n\n    _this.hideDropdownMenu = function () {\n      _this.setState({\n        displayMenu: false\n      }, function () {\n        document.removeEventListener('click', _this.hideDropdownMenu);\n      });\n    };\n\n    _this.handleOnClick = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        categorySelected: e.target.innerHTML\n      });\n    };\n\n    _this.handleMsg = function (jokes) {\n      if (Object.keys(jokes).length === 0) {\n        return React.createElement(\"h4\", {\n          className: \"category-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"SCROLL HERE TO LOAD JOKES!\");\n      } else if (_this.state.loadingState) {\n        return React.createElement(\"div\", {\n          className: \"preloader-wrapper small active\",\n          style: {\n            left: '50%',\n            bottom: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"spinner-layer spinner-green-only\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"circle-clipper left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"gap-patch\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"circle-clipper right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }))));\n      }\n    };\n\n    _this.state = {\n      loadingState: false,\n      displayMenu: false,\n      categorySelected: '--Select--'\n    };\n    return _this;\n  }\n\n  _createClass(JokesBoard, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.getCategories();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.refs.iScroll.scrollTop = this.props.scrollLastSize; //Load first jokes until user can scroll on viewport\n\n      this.refs.iScroll.addEventListener(\"wheel\", function () {\n        if (_this2.refs.iScroll.scrollTop <= 0 && !_this2.state.loadingState) {\n          _this2.loadJokes();\n        }\n      });\n      this.refs.iScroll.addEventListener(\"scroll\", function () {\n        _this2.props.saveScrollPos(_this2.refs.iScroll.scrollTop);\n\n        if (_this2.refs.iScroll.scrollTop + _this2.refs.iScroll.clientHeight >= _this2.refs.iScroll.scrollHeight - _this2.refs.iScroll.scrollHeight * 0.001 && !_this2.state.loadingState) {\n          _this2.refs.iScroll.scrollTop -= _this2.refs.iScroll.scrollHeight * 0.002;\n\n          _this2.loadJokes();\n        }\n      });\n    }\n  }, {\n    key: \"loadJokes\",\n    value: function loadJokes() {\n      var _this3 = this;\n\n      this.setState({\n        loadingState: true\n      }, function () {\n        console.log(_this3.state.loadingState);\n\n        _this3.props.addJoke();\n\n        _this3.setState({\n          loadingState: false\n        });\n\n        console.log(_this3.state.loadingState);\n      });\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var jokes = this.props.jokes;\n      var categories = this.props.categories;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"category-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Filter by category\"), React.createElement(\"div\", {\n        className: \"dropDownButton\",\n        id: \"dropdownSelected\",\n        onClick: this.showDropdownMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.state.categorySelected), this.state.displayMenu && React.createElement(\"ul\", {\n        className: \"dropdownList\",\n        id: \"style-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, categories.map(function (item) {\n        return React.createElement(\"li\", {\n          className: \"list\",\n          key: item,\n          onClick: _this4.handleOnClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, item);\n      }))), React.createElement(\"img\", {\n        style: {\n          width: '203px',\n          height: '550px',\n          left: '30px',\n          top: '82px',\n          position: 'absolute'\n        },\n        alt: \"png\",\n        src: viewportImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        style: {\n          width: '600px',\n          height: '125px',\n          left: '220px',\n          top: '30px',\n          position: 'relative'\n        },\n        alt: \"png\",\n        src: balloonImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"jokesContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"scrollbar\",\n        id: \"style-1\",\n        ref: \"iScroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col s12 m10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(JokeList, {\n        jokes: jokes,\n        category: this.state.categorySelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), this.handleMsg(jokes)))));\n    }\n  }]);\n\n  return JokesBoard;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addJoke: function addJoke() {\n      return dispatch(_addJoke());\n    },\n    getCategories: function getCategories() {\n      return dispatch(_getCategories());\n    },\n    saveScrollPos: function saveScrollPos(scrollPos) {\n      return dispatch(_saveScrollPos(scrollPos));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    jokes: state.jokes,\n    categories: state.categories,\n    scrollLastSize: state.scrollLastSize\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JokesBoard);","map":{"version":3,"sources":["D:\\test_express\\expresschuckjokes\\client\\src\\components\\jokes\\JokesBoard.js"],"names":["React","Component","JokeList","connect","addJoke","saveScrollPos","getCategories","viewportImage","balloonImage","JokesBoard","props","showDropdownMenu","event","preventDefault","setState","displayMenu","document","addEventListener","hideDropdownMenu","removeEventListener","handleOnClick","e","categorySelected","target","innerHTML","handleMsg","jokes","Object","keys","length","state","loadingState","left","bottom","refs","iScroll","scrollTop","scrollLastSize","loadJokes","clientHeight","scrollHeight","console","log","categories","map","item","width","height","top","position","mapDispatchToProps","dispatch","scrollPos","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport JokeList from './JokesList'\r\nimport { connect } from 'react-redux'\r\nimport { addJoke } from '../../store/actions/jokesActions'\r\nimport { saveScrollPos } from '../../store/actions/scrollActions'\r\nimport { getCategories } from '../../store/actions/categoriesActions'\r\nimport viewportImage from '../../images/chuckArms.png'\r\nimport balloonImage from '../../images/balloon.png'\r\nimport '../../styles/style.css'\r\n\r\nclass JokesBoard extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loadingState: false,\r\n            displayMenu: false,\r\n            categorySelected: '--Select--'\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.getCategories()\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refs.iScroll.scrollTop = this.props.scrollLastSize\r\n\r\n        //Load first jokes until user can scroll on viewport\r\n        this.refs.iScroll.addEventListener(\"wheel\", () => {\r\n            if (this.refs.iScroll.scrollTop <= 0 && !this.state.loadingState) {\r\n                this.loadJokes()\r\n            }\r\n        })\r\n\r\n        this.refs.iScroll.addEventListener(\"scroll\", () => {\r\n            this.props.saveScrollPos(this.refs.iScroll.scrollTop)\r\n\r\n            if (((this.refs.iScroll.scrollTop + this.refs.iScroll.clientHeight) >= (this.refs.iScroll.scrollHeight - (this.refs.iScroll.scrollHeight * 0.001))) && !this.state.loadingState) {\r\n                this.refs.iScroll.scrollTop -= (this.refs.iScroll.scrollHeight * 0.002)\r\n                this.loadJokes()\r\n            }\r\n        })\r\n    }\r\n\r\n    loadJokes () {\r\n        this.setState({ loadingState: true }, () => {\r\n            console.log(this.state.loadingState)\r\n            this.props.addJoke()\r\n            this.setState({ loadingState: false })\r\n            console.log(this.state.loadingState)\r\n        })\r\n\r\n        return true\r\n    }\r\n\r\n    showDropdownMenu = (event) => {\r\n        event.preventDefault()\r\n        this.setState({ displayMenu: true }, () => {\r\n            document.addEventListener('click', this.hideDropdownMenu)\r\n        })\r\n    }\r\n\r\n    hideDropdownMenu = () => {\r\n        this.setState({ displayMenu: false }, () => {\r\n            document.removeEventListener('click', this.hideDropdownMenu);\r\n        })\r\n    }\r\n\r\n    handleOnClick = (e) => {\r\n        e.preventDefault()\r\n        this.setState({ categorySelected: e.target.innerHTML })\r\n    }\r\n\r\n    handleMsg = (jokes) => {\r\n        if (Object.keys(jokes).length === 0) {\r\n            return (\r\n                <h4 className=\"category-text\">SCROLL HERE TO LOAD JOKES!</h4>\r\n            )\r\n        }\r\n        else if(this.state.loadingState) {\r\n            return (\r\n                <div className=\"preloader-wrapper small active\" style={{ left: '50%', bottom: '10px' }}>\r\n                    <div className=\"spinner-layer spinner-green-only\">\r\n                        <div className=\"circle-clipper left\">\r\n                            <div className=\"circle\"></div>\r\n                        </div><div className=\"gap-patch\">\r\n                            <div className=\"circle\"></div>\r\n                        </div><div className=\"circle-clipper right\">\r\n                            <div className=\"circle\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { jokes } = this.props\r\n        const { categories } = this.props\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"dropdown\">\r\n                    <p className=\"category-text\">Filter by category</p>\r\n                    <div className=\"dropDownButton\" id=\"dropdownSelected\" onClick={this.showDropdownMenu}>{this.state.categorySelected}</div>\r\n                    {this.state.displayMenu && <ul className=\"dropdownList\" id=\"style-3\">\r\n                        {categories.map(item => (\r\n                            <li className=\"list\" key={item} onClick={this.handleOnClick}>{item}</li>\r\n                        ))}\r\n                    </ul>}\r\n                </div>\r\n\r\n                <img style={{ width: '203px', height: '550px', left: '30px', top: '82px', position: 'absolute' }} alt='png' src={viewportImage} />\r\n                <img style={{ width: '600px', height: '125px', left: '220px', top: '30px', position: 'relative' }} alt='png' src={balloonImage} />\r\n                <div className='jokesContainer'>\r\n                    <div\r\n                        className='scrollbar' id='style-1'\r\n                        ref='iScroll'\r\n                    >\r\n                        <div className='container'>\r\n                            <div className='col s12 m10'>\r\n                                <JokeList jokes={jokes} category={this.state.categorySelected} />\r\n                            </div>\r\n                            {this.handleMsg(jokes)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addJoke: () => dispatch(addJoke()),\r\n        getCategories: () => dispatch(getCategories()),\r\n        saveScrollPos: (scrollPos) => dispatch(saveScrollPos(scrollPos))\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        jokes: state.jokes,\r\n        categories: state.categories,\r\n        scrollLastSize: state.scrollLastSize\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JokesBoard)"]},"metadata":{},"sourceType":"module"}